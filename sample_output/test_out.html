
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/1.44.1/plotly.js"></script>

<style>
html, body { height: 100%; }
.js-plotly-plot .plotly .cursor-ew-resize {
  cursor: crosshair;
}
#plot {
  height: 300px;
}
#frameData {
  width: 100%;
  border: none;
}
</style>
</head>
<body style="height:99%;">
  <div id="plot"></div>
  <iframe id="frameData" src="frames/test_out_ALL.html" style="height:calc(100% - 300px);">
  </iframe>
<script type="text/javascript">
const dataX = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99];
const dataY = [3.462501, 1.9286519999999998, 2.1507829999999997, 2.1528430000000007, 3.092830999999999, 3.030709000000001, 1.2638040000000004, 1.8576749999999995, 3.003165999999998, 3.1963930000000023, 1.7676859999999974, 2.8661010000000027, 2.287164000000001, 1.9797039999999988, 1.365588000000001, 2.9304589999999964, 2.286372000000002, 1.8929889999999978, 2.2990069999999987, 2.5009880000000027, 2.159781999999999, 1.9721080000000002, 1.9718010000000021, 2.0441819999999984, 1.6531940000000036, 2.580525, 1.983750999999999, 2.5353979999999945, 1.1081299999999987, 1.3083680000000042, 2.723781999999994, 1.835639, 2.400730000000004, 3.2897740000000093, 1.722546999999991, 2.2902649999999998, 1.6753720000000083, 2.6267889999999907, 3.4272320000000023, 2.322358999999996, 1.4927410000000059, 2.915761000000003, 1.3681899999999914, 2.0752410000000054, 2.721610999999999, 0.9330200000000066, 3.0948930000000012, 1.8716689999999925, 1.512409000000006, 2.194147999999993, 2.5023350000000084, 2.5076049999999963, 1.9830929999999913, 1.5124710000000015, 1.9817400000000096, 3.194164999999999, 2.956346999999984, 1.5611960000000147, 1.5334599999999865, 2.1839960000000214, 2.527098999999977, 1.7035220000000129, 1.8473350000000055, 2.756571999999985, 1.824582000000019, 2.6261579999999896, 2.368959000000004, 1.8533930000000087, 2.943079999999987, 1.2310990000000133, 1.5211069999999938, 2.2674059999999994, 3.407857999999986, 2.0406960000000085, 2.420005000000003, 1.7144729999999941, 2.2219440000000032, 1.834753999999994, 2.0541930000000095, 2.424083999999993, 1.1301680000000147, 2.5313559999999846, 3.1409390000000093, 1.6947699999999843, 2.4974570000000087, 1.7508440000000014, 3.060336999999996, 2.6618370000000002, 3.069039999999995, 3.0283390000000185, 1.787694999999978, 2.7440090000000197, 3.0798290000000064, 1.995093999999975, 1.025841999999999, 1.9607480000000121, 1.8093479999999884, 2.716993000000001, 2.00618700000002, 3.8647950000000044];
const data = [
  {
    x: dataX,
    y: dataY,
    name: 'Performance',
    type: 'bar'
  },
]
const layout = {
  autosize: true,
  xaxis: {
    automargin: true,
    autorange: true,
    type: 'linear',
    title: { text: 'Frame' },
  },
  yaxis: {
    automargin: true,
    autorange: true,
    fixedrange: true,
    type: 'linear',
    title: { text: 'Time (ms)' },
  },
  legend: { x: 0, y: 1.2, bgcolor: '#E2E2E2' },
  title: {
    text: "Perf Report",
    x: 0.5,
    y: 1.1,
  },
}

const config = {
  editable: false,
  modeBarButtonsToRemove: ['sendDataToCloud'],
  displaylogo: false,
  locale: 'en-AU'
}

Plotly.newPlot(
  'plot',
  data,
  layout,
  config,
);

document.getElementById('plot').on('plotly_click', singleClickHandler);

function singleClickHandler(data) {
  let pn = data.points[0].pointNumber + 1;
  document.getElementById("frameData").src = `./frames/test_out_${pn}.html`;
  let tn = data.points[0].curveNumber;
  let colors = new Array(data.points[0].data.x.length).fill("#1f77b4")
  colors[pn-1] = '#C54C82';
  var update = {'marker':{color: colors, size:16}};
  Plotly.restyle('plot', update,[tn]);
}
</script>
</body>
</html>
